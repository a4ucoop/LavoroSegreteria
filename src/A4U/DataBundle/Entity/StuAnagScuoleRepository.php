<?php

namespace A4U\DataBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * StuAnagScuoleRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class StuAnagScuoleRepository extends EntityRepository
{
    /**
     * Get Regioni
     *
     * @return array 
     */
    public function getRegioni()
    {
        $qb = $this->getEntityManager()->createQueryBuilder();
        
        $qb->select('s0')
        ->from('A4UDataBundle:StuAnagScuole', 's0')
        ->groupBy('s0.regione');

        return $qb;
    }

    /**
     * Get Provincie
     * @param StuAnagScuole
     * @return array 
     */
    public function getProvincie(StuAnagScuole $scuola)
    {
        
        $regione = $scuola->getRegione();

        $qb = $this->getEntityManager()->createQueryBuilder();
        
        $qb->select('s0')
        ->from('A4UDataBundle:StuAnagScuole', 's0')
        ->where('s0.regione = :regione')
        ->groupBy('s0.provincia')
        ->setParameters(array(
            'regione' => ($regione)
        ));

        return $qb;
    }    

    /**
     * Get Citta
     * @param StuAnagScuole
     * @return array 
     */
    public function getCitta(StuAnagScuole $scuola)
    {
    	
        $provincia = $scuola->getProvincia();

        $qb = $this->getEntityManager()->createQueryBuilder();
        
        $qb->select('s0')
        ->from('A4UDataBundle:StuAnagScuole', 's0')
        ->where('s0.provincia = :provincia')
        ->groupBy('s0.citta')
        ->setParameters(array(
            'provincia' => ($provincia)
        ));

        return $qb;
    }
}
